{"createdAt":"2025-04-05T17:43:56.956Z","updatedAt":"2025-04-05T17:50:28.000Z","id":"Yg0jt3xWy8o2q4V6","name":"My workflow","active":false,"nodes":[{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/upload/v1beta/files","authentication":"genericCredentialType","genericAuthType":"httpQueryAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"X-Goog-Upload-Command","value":"start, upload, finalize"},{"name":"X-Goog-Upload-Header-Content-Length","value":"128"},{"name":"X-Goog-Upload-Header-Content-Type","value":"image/png"},{"name":"Content-Type","value":"image/png"}]},"sendBody":true,"contentType":"binaryData","inputDataFieldName":"data","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[260,-180],"id":"9dc3179c-4709-4b2c-a854-617547347dba","name":"upload","credentials":{"httpQueryAuth":{"id":"PW7nVm67DZV1Hdq3","name":"Query Auth account"}}},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-540,-180],"id":"2ba594b9-2b0f-4063-a565-fbb6c0c98997","name":"When clicking ‘Test workflow’"},{"parameters":{"documentId":{"__rl":true,"value":"1bg67POjEJz_RO2zcgS0vyo3v8m2wyim13hErBt5RNJY","mode":"list","cachedResultName":"create image from url","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1bg67POjEJz_RO2zcgS0vyo3v8m2wyim13hErBt5RNJY/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"list","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1bg67POjEJz_RO2zcgS0vyo3v8m2wyim13hErBt5RNJY/edit#gid=0"},"filtersUI":{"values":[{"lookupColumn":"Trạng thái","lookupValue":"Chưa làm"}]},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[-340,-180],"id":"fa331426-dc20-4e7d-b371-90009ffd54ed","name":"Google Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"WgF6l0tsz1Jeq8pk","name":"Google Sheets account"}}},{"parameters":{"resource":"image","operation":"analyze","modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"text":"=Mô tả ngắn gọn nội dung hình ảnh trong 10 từ tiếng anh","imageUrls":"={{ $('Edit Fields').item.json.url }}","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[460,-320],"id":"09091359-8f70-4176-a73d-0ac724b23de1","name":"OpenAI","retryOnFail":true,"credentials":{"openAiApi":{"id":"YUXfwQd3CGq9bfen","name":"OpenAi account"}}},{"parameters":{"url":"={{ $json.url }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[60,-180],"id":"996f2fa8-cd8f-494c-8996-7079cef1f124","name":"dowload"},{"parameters":{"promptType":"define","text":"=Mô tả về sản phẩm:  {{ $json.content }}","messages":{"messageValues":[{"message":"=## Overview:\n- Bạn là một chuyên gia thiết kế concept dựa trên hình ảnh sản phẩm được cung cấp. Ngoài ra bạn rất giỏi và am hiểu prompting bằng tiếng anh cho AI tạo ảnh\n\n## Nhiêm vụ:\n- Hãy tạo một đoạn prompt ngắn cho trình tạo hình ảnh AI, trong đó sẽ nhận vào một bức ảnh sản phẩm để cuối cùng tạo ra ảnh chụp sản phẩm chuyên nghiệp.\n- Nếu sản phẩm có thể mặc được, bạn phải đảm bảo nó được một người mẫu mặc. Nếu sản phẩm không thể mặc, hãy đảm bảo có một người mẫu cầm hoặc tương tác với nó theo cách nào đó. Sản phẩm LUÔN LUÔN phải đi kèm với một người mẫu.\n- Hãy chắc chắn bao gồm các hướng dẫn để có được độ chân thực tốt nhất, ánh sáng tốt nhất, góc chụp đẹp nhất, màu sắc chuẩn nhất, vị trí người mẫu phù hợp nhất, v.v. tùy thuộc vào loại sản phẩm.\n- Luôn viết prompt dưới dạng nhắc đến sản phẩm, ví dụ: \"sản phẩm này [PRODUCT]\", để trình tạo hình ảnh AI hiểu rằng nó sẽ nhận một bức ảnh sản phẩm làm đầu vào.\n\n## SOP:\n- Phong cách 'Product Photoshoot' chuyên nghiệp, phù hợp với sản phẩm\n- Prompt trả ra là tiếng anh"}]}},"type":"@n8n/n8n-nodes-langchain.chainLlm","typeVersion":1.5,"position":[620,-320],"id":"a729d2a4-052d-47e5-bd4a-193b799fd771","name":"Basic LLM Chain"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[620,-140],"id":"49cf90ad-ea00-402c-b492-cfbe706b04b7","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"YUXfwQd3CGq9bfen","name":"OpenAi account"}}},{"parameters":{"method":"POST","url":"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp-image-generation:generateContent","authentication":"genericCredentialType","genericAuthType":"httpQueryAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"contents\": [{\n    \"role\": \"user\",\n    \"parts\": [\n      {\n        \"text\": \"{{ $json.text.replaceAll('\\\"', '') }}\"\n      },\n      {\n        \"fileData\": {\n          \"mimeType\": \"image/png\",\n          \"fileUri\": \"{{ $('upload').item.json.file.uri }}\"\n        }\n      }\n    ]\n  }],\n  \"generationConfig\": {\n    \"temperature\": 1.4,\n    \"topK\": 40,\n    \"topP\": 0.95,\n    \"maxOutputTokens\": 8192,\n    \"responseMimeType\": \"text/plain\",\n    \"responseModalities\": [\"image\",\"text\"]\n  }\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[940,-320],"id":"117aaea8-7747-46f8-8ff9-338b210bc708","name":"generative","credentials":{"httpQueryAuth":{"id":"PW7nVm67DZV1Hdq3","name":"Query Auth account"}}},{"parameters":{"assignments":{"assignments":[{"id":"0e1396e7-10ad-4402-9961-f9b1d65f75ff","name":"url","value":"={{ $json['Link ảnh'] }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-140,-180],"id":"82b6e3de-6e4c-48e5-8973-9305e1e0b400","name":"Edit Fields"},{"parameters":{"operation":"toBinary","sourceProperty":"candidates[0].content.parts[0].inlineData.data","options":{}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[1120,-320],"id":"dfdd48c8-0fef-470c-8bb8-d49d14aff062","name":"Convert to File"},{"parameters":{"name":"img","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"15eDpewVhbA5ePEXEoya1TjVhi-hAakNV","mode":"list","cachedResultName":"n8n_demo_gemini","cachedResultUrl":"https://drive.google.com/drive/folders/15eDpewVhbA5ePEXEoya1TjVhi-hAakNV"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1280,-320],"id":"88b299df-e6f9-4b52-8a3c-85bc0f013238","name":"Google Drive"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1FiNFltMOzJ_Ioqqvmu96TNIhllVfn2TOTJRV9AetBD0","mode":"list","cachedResultName":"Demo Sản Phẩm","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1FiNFltMOzJ_Ioqqvmu96TNIhllVfn2TOTJRV9AetBD0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"list","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1FiNFltMOzJ_Ioqqvmu96TNIhllVfn2TOTJRV9AetBD0/edit#gid=0"},"columns":{"mappingMode":"defineBelow","value":{"row_number":"={{ $('Google Sheets').item.json.row_number }}","Trạng Thái":"Done","Prompt Vẽ":"={{ $('Basic LLM Chain').item.json.text }}","Link Hình Ảnh":"={{ $json.webViewLink }}"},"matchingColumns":["row_number"],"schema":[{"id":"Link Sản Phâm","displayName":"Link Sản Phâm","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"Trạng Thái","displayName":"Trạng Thái","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Prompt Vẽ","displayName":"Prompt Vẽ","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Link Hình Ảnh","displayName":"Link Hình Ảnh","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"readOnly":true,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[1440,-320],"id":"253eeb09-db3b-4f17-8180-82c8b75b800f","name":"update","credentials":{"googleSheetsOAuth2Api":{"id":"WgF6l0tsz1Jeq8pk","name":"Google Sheets account"}}}],"connections":{"When clicking ‘Test workflow’":{"main":[[{"node":"Google Sheets","type":"main","index":0}]]},"Google Sheets":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"upload":{"main":[[{"node":"OpenAI","type":"main","index":0}]]},"dowload":{"main":[[{"node":"upload","type":"main","index":0}]]},"OpenAI":{"main":[[{"node":"Basic LLM Chain","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Basic LLM Chain","type":"ai_languageModel","index":0}]]},"Basic LLM Chain":{"main":[[{"node":"generative","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"dowload","type":"main","index":0}]]},"generative":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"Google Drive","type":"main","index":0}]]},"Google Drive":{"main":[[{"node":"update","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{"When clicking ‘Test workflow’":[{"json":{}}]},"versionId":"3b2ad310-bed4-4a2c-9e44-01232b600e37","triggerCount":0,"tags":[]}